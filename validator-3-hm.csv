issue,title,validator comment,grade,root cause (URL),size
findings-3,PriceFeed doesn't check min/max price boundaries,oracle minAnswer,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/oracle/PriceFeed.sol#L84-L94,29
findings-4,Limit order offerers have little control over amounts they would borrow or lend,feature improvement slippage,Unsatisfactory,,67
findings-5,The debtor can be liquidated if his loan due date has come while the protocol is in the paused state,cannot repay if paused,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/RiskLibrary.sol#L113, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/LoanLibrary.sol#L135-L136",48
findings-6,Multicall incorrectly validates borrow token supply cap,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,101
findings-7,Incorrect validation in validateVariablePoolHasEnoughLiquidity will cause DoS of the protocol's major functions,aave liquidity check,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/CapsLibrary.sol#L68,70
findings-8,take profit loss when users sell credit with existing credit,related to finding#11,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/BuyCreditMarket.sol#L121-L198,78
findings-10,Fragmentation fee is not taken if user compensates with newly created position,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",82
findings-11,"The initiator should pay the fragmentation fees in the sellCreditMarket function, rather than the lender.",fragmentation fee should be from initiator,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/SellCreditMarket.sol#L202,47
findings-12,Debt fragmentation via compensate can DOS liquidation attempts,fragmentation gas DOS liq,Satisfactory,https://github.com/SizeCredit/size-solidity/blob/fbfe6aa84c2a3ef1ded776cda7a079542a3cdef8/src/libraries/actions/Compensate.sol#L105-L173,226
findings-13,The `borrowATokenCap` can be bypassed when `deposit` is called by using `multicall`.,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,254
findings-14,Overestimating the credit amount when `buyCreditMarket` is executed due to not properly deducting the swap fee,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",140
findings-15,`executeBuyCreditMarket` returns the wrong amount of cash and overestimates the amount that needs to be checked in the variable pool,miss fee in `cashAmountIn`,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L195, https://github.com/code-423n4/2024-06-size/blob/main/src/Size.sol#L184",139
findings-16,`validateSellCreditMarket` and `validateBuyCreditMarket` incorrectly assumes `params.amount` is credit when validating against `minimumCreditBorrowAToken`,minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L91-L93,83
findings-17,Incorrectly using `futureValue` instead of `debtInCollateralToken` when calculating `liquidatorReward`,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,119
findings-18,Users can bypass the borrowAToken cap check by using multicall,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,119
findings-19,"When the borrowAToken cap is reached, users may not always be able to repay their debt in some cases due to precision errors",borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,174
findings-20,No Fragmentation fees paid on credit fragmentation due to partial debt repayment,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",194
findings-21,Users won't liquidate positions because the logic used to calculate the liquidator's profit is incorrect,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,148
findings-22,Users can avoid full liquidation by splitting up their debt,liq split mechanism could be abused,Satisfactory,https://github.com/SizeCredit/size-solidity/blob/bb5837ad08d274779d48f776f45a2d2d1c21716f/src/libraries/actions/Liquidate.sol#L112,305
findings-23,The protocol cannot collect the full fee when borrowers sell credit without a fragmentation fee.,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",169
findings-24,No fragmentation fee is taken when `compensate` is performed using `RESERVED_ID`.,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",143
findings-25,"Pausing prevents debt repayment, leading to immediate liquidation if the debt is overdue when unpaused.",related to finding#5,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/LoanLibrary.sol#L135-L137, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/RiskLibrary.sol#L104-L115",82
findings-26,Lender USDC reward is not converted to collateral token,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,89
findings-27,Borrow aToken cap can be bypassed by depositing via multicall,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,82
findings-28,Borrower will not be charged fragmentation fee when creating new credit position when compensating a credit partially,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",47
findings-29,Rounding against the protocol will result in less rewards,rounding direction rewards,Unsatisfactory,,43
findings-30,Lender can be forced to pay swap and fragmentation fees on claimable credit amounts,"feature improvement, no loss",Unsatisfactory,,32
findings-31,Strategic credit fragmentation by borrower can force lender to get liquidated on their borrow positions,borrower cannot timely repay if too many fragments,Unsatisfactory,,98
findings-32,Fragmentation fee not refunded if the claimer is the credit position owner,fragmentation fee refund to owner,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/SellCreditMarket.sol#L202,50
findings-33,Lender can be forced out of existing positions unwillingly if they have an open SELL LMT order,new bought position should not be forSale,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/AccountingLibrary.sol#L81, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/AccountingLibrary.sol#L119",69
findings-34,User can bypass `RiskConfig.borrowATokenCap` limit up to 10x times using multicall. Leading to temporary DOS attack,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,135
findings-35,`CapsLibrary.validateVariablePoolHasEnoughLiquidity()` always revert,aave liquidity check,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/CapsLibrary.sol#L68,59
findings-36,Insufficient Liquidity Check on AAVE Variable Pool for multiple pending borrowers,should check overall aave liquidity,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L185-L195,87
findings-37,Use of `isMulticall` is unsafe for future contract upgrades without reentrancy protection,,Unsatisfactory,,68
findings-38,Liquidator cannot deposit both USDC and WETH through multicall in same transaction if there is `msg.value` included,feature improvement,Unsatisfactory,,78
findings-39,`LiquidateWithReplacement` not take fee on new borrower,miss fee for borrower replacement,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L146-L147,89
findings-40,Lender-Enforced 150% Collateral Ratio Creates Extreme Risk for Borrowers,feature improvement,Unsatisfactory,,49
findings-41,`LiquidateWithReplacement` Fails to Reduce Liquidator Costs and have no benefit over standard `Liquidation` call,no loss,Unsatisfactory,,101
findings-42,Repay do not check debt position already moved to another borrower or belong to `msg.sender`,repay for other user after liquidation,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L229,90
findings-43,Admin config lack of some validation for `crLiquidation` and `crOpening`,admin mistake,Unsatisfactory,,48
findings-44,Lack of Borrower Protection: Borrower loss when borrow offer APR is higher than lend offer APR,feature improvement,Unsatisfactory,,217
findings-45,Wrong Liquidator Rewards Calculation,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,76
findings-46,`openingLimitBorrowCR` is Inadequate to Protect Borrowers from more Debt after Repayment or Liquidation,expected behavior,Unsatisfactory,,74
findings-47,`SellCreditMarket` with non-ExactAmountIn calculate wrong credit for borrower,expected behavior,Unsatisfactory,,239
findings-49,"Since the lender and borrower can be the same, BorrowATokenCap can be bypassed.",borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,194
findings-50,The protocol fails to collect the full fee accurately when there is a fragmentation fee,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",205
findings-52,LiquidatorReward is incorrectly calculated,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,74
findings-53,LiquidateWithReplacement does not charge swap fees on the borrower,liq miss swap fee,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L146,90
findings-54,Swap fees are incorrectly calculated when selling credit as a whole when `exactAmountIn == false`.,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",157
findings-55,Swap fees are incorrectly calculated when selling partial credit when `exactAmountIn == false`.,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",163
findings-56,Buying or selling an existing credit does not validate if the remaining tenor is in range,tenor range check,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L51,151
findings-57,"In `BuyCreditMarket.sol` and `SellCreditMarket.sol`, this constraint for minimum credit is higher than it should be.",minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L91-L93,69
findings-58,Underwater users are not allowed to use `compensate()` to repay debts,"underwater cannot use compensate to repay
 maybe expected behavior, just like portfolio margin and standard margin",Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L250,85
findings-59,"Malicious users can perform a grief attack by repaying a loan to themselves using multicall to deposit tokens, thereby exceeding the `borrowATokenCap`.",borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,133
findings-60,"If a user has placed both a buy limit order and a sell limit order, and the sell limit order has a lower APR, the user will be vulnerable to arbitrage.",expected behavior,Unsatisfactory,,47
findings-61,"Anyone can call the `claim()` function to claim credit for the lender, which increases the lender's borrowAToken and may cause them to lend more tokens than expected.",expected behavior,Unsatisfactory,,92
findings-62,"In `Compensate.sol`, fragmentation fee is not charged when compensate amount is less than `creditPositionWithDebtToRepay.credit`.",fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",113
findings-63,"The `compensate()` function can be frontrun, causing users to pay an unnecessary fragmentation fee.",seems expected behavior,Unsatisfactory,,100
findings-64,"When users buy existing credit via `BuyCreditMarket` and has `exactAmountIn == true`, it is nearly impossible for users to avoid paying fragmentation fee.",feature improvement,Unsatisfactory,,123
findings-65,"When users sell existing credit via `SellCreditMarket` and has `exactAmountIn == false`, it is nearly impossible for users to avoid paying fragmentation fee.",feature improvement,Unsatisfactory,,130
findings-66,YieldCurveLibrary.sol#getAdjustedAPR does not check if variablePoolBorrowRate is non-zero.,,Unsatisfactory,,79
findings-67,LiquidateWithReplacement should round up issuanceValue instead of rounding down.,rounding direction against doc specs,Unsatisfactory,,56
findings-68,NonTransferrableScaledToken is not ERC20 compliant - it does not correctly fire the `Transfer` event.,no significant loss,Unsatisfactory,,72
findings-70,The collateral remainder cap is incorrectly calculated during liquidation,liq collateralRemainder,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L110,221
findings-71,The borrower can borrow USDC without a swap fee,liq miss swap fee,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L146,105
findings-72,Liquidator rewards are incorrectly calculated ,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,37
findings-73,Overdue liquidations punish overcollaterized users,liq penalty mechanism,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L103-L112,59
findings-74,Overcollaterized users can withdraw their collateral in anticipation of liquidation,seems expected behavior,Unsatisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L103-L112,55
findings-75,Underwater liquidations don't take into account the borrower's future cash flows to compensate his debt,liq should consider future cash flow,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L37-L44,29
findings-76,Compensating borrowers could bear unexpected fragmentation fees,"fragmentation fee multi lender, maybe feature improvement",Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L127-L136,59
findings-77,`repay` is not callable during a pause,cannot repay if paused,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/RiskLibrary.sol#L113, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/LoanLibrary.sol#L135-L136",26
findings-78,Users cannot eliminate the liquidation risk when the CR falls below the liquidation CR by repaying partially,partial repay should increase CR,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L120-L125, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L250",101
findings-79,Liquidator receive a smaller reward because `liquidatorReward` is the minimum between a `collateral` amount and a `borrowAToken` amount,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,156
findings-80,validateVariablePoolHasEnoughLiquidity() misuse liquidity,aave liquidity check,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/CapsLibrary.sol#L68,81
findings-81,multicall() borrowATokenSupply amount wrong,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,123
findings-82,"validateCompensate() Missing check forSale, may be maliciously modified",change other user's forSale parameter,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L42,112
findings-83,executeLiquidate() miscalculation liquidatorReward,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,80
findings-84,"borrowAToken and aToken rounds direction are not the same, which can cause multiple problems.",rounding direction inconsistent,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/token/NonTransferrableScaledToken.sol#L99,109
findings-85,"executeSellCreditMarket() when creditPositionId == RESERVED_ID , Incorrect calculation of fees",swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",114
findings-86,"executeSellCreditMarket() when creditPositionId != RESERVED_ID , Incorrect calculation of fees",swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",129
findings-87,compensate() may increase the risk of lender,need to investigate if borrower maliciously transfer funding risk,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L64-L89,96
findings-88,withdraw() users may can't withdraw underlyingBorrowToken properly,should treat CollateralToken and BorrowToken differently,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L162,65
findings-90,The `szaUSDC` token and `USDC` token do not have a strict 1:1 conversion ratio,no loss for this protocol,Unsatisfactory,,92
findings-91,`multicall()` doesn't correctly enforce `borrowATokenCap`,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,100
findings-92,`amount` validations are incorrect for some `exactAmountIn` cases,compare credit values to cash values without premium,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/BuyCreditMarket.sol#L91-L93, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/SellCreditMarket.sol#L87-L89, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/SellCreditMarket.sol#L93-L95",73
findings-94,Validations aren't sufficient to prevent reorg issues,re org,Unsatisfactory,,37
findings-95,Unhealthy borrowers can recover all collateral and avoid liquidation penalty via `Size::compensate`,abuse split,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L42-L145,227
findings-96,"Using multicall functionality, one can bypass the deposit cap even without reducing debt",borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,95
findings-97,Wrong comparison of token values causes liquidator profit to be negligible,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,95
findings-98,"Miscalculation of remaining collateral, protocol cut when liquidating overdue loans is too high",liq collateralRemainder,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L110,143
findings-99,The borrowers cannot withdraw the borrowed USDC because there is no upper limit on the borrowing amount,expected behavior,Unsatisfactory,,86
findings-100,"Repaying an underwater debt is dangerous, as the borrower could lose the repayment cash while still being liquidated if a `liquidateWithReplacement()` is executed before the `repay()`",repay for other user after liquidation,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L229,113
findings-101,Bad actors can grief users by creating useless loans on their behalf via `Size::compensate`,no loss,Unsatisfactory,,256
findings-102,Users cannot make compensation when the due date is within the minimum tenor period,minimum tenor,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L60-L62,106
findings-103,Compensate allows lenders to transfer bad credit positions before an oracle update,frontrun oracle update,Unsatisfactory,,41
findings-104,Liquidator profit collateral is underestimated due to an inconsistency in units,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,36
findings-105,The borrower can `compensate` their debt using credit with soon-to-be-liquidatable debt,seems feature improvement,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L76-L82,82
findings-106,By only taking into account the liquidatorProfit when calling liquidateWithReplacement() the caller might miss out on profitable liqudations,miss liquidatorProfit,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L147,32
findings-107,Borrower is not able to compensate his lenders if he is underwater,"underwater cannot use compensate to repay
 maybe expected behavior, just like portfolio margin and standard margin",Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L250,70
findings-108,"Credit value stops growing when the debt is overdue, causing a loss for the lender.",overdue debt should continue accure interest,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Repay.sol#L46-L54, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Liquidate.sol#L118-L125",86
findings-109,"Unhealthy borrower is able to ""withdraw"" most of his borrow tokens",maybe expected behavior,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L178-L185, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L166-L168",58
findings-110,liquidatorReward is calculated with the wrong token leading to incorrect amount of funds being sent to the liquidator,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,86
findings-113,Size liquidation bots might skip profitable liquidations due to the minimum collateral profit check.,bot's choice of borrower makes the protocol loss profit,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L138,168
findings-114,Protocol is not usable due to incorrect aaveV3 liquidity check,aave liquidity check,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/CapsLibrary.sol#L68,94
findings-115,Wrong math for splitting the collateral in `liquidate` leads to unfair liquidation for borrowers,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,77
findings-116,"Exploit in `liquidateWithReplacement` allows bots to force lenders into repaying their own loans, causing financial loss",expected behavior,Unsatisfactory,,100
findings-117,Picking a second borrower with 0 APR when calling the `liquidateWithReplacement` by bots leads to no profit for the protocol,bot's choice of borrower makes the protocol loss profit,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L138,82
findings-118,Loss of fees for the `feeRecipient` in case of selling credit market,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",85
findings-119,Improper Validation in the `BuyCreditMarket::validateBuyCreditMarket` Function Causes Incorrect Reverts When `params.exactAmountIn` is True resulting in an invariant break,,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/BuyCreditMarket.sol#L91-L93,63
findings-120,Credit buyers can't use a longer due date than the due date of for sale credit position,"against doc specs, but no loss, design choice",Unsatisfactory,,44
findings-123,BuyCreditMarket and SellCreditMarket can revert despite using correct amount of credit that is more than minimumCreditBorrowAToken,minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L91-L93,77
findings-124,A user can be in a loan all by himself - being the lender and the borrower of the same loan,no loss,Unsatisfactory,,44
findings-125,Liquidator's reward is significantly lower than it should be,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,140
findings-126,"In the Compensate function, splitting the original credit position through ""mining new credit"" will never charge a fragmentation fee",fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",138
findings-128,"Swap fees calculation is inconsistent, producing different fees for essentially the same loans",swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",73
findings-129,"User can transfer OVERDUE loans, when he isn't expected to and there are checks that try to prevent that",expected behavior,Unsatisfactory,,182
findings-130,Incorrect calculation of deposit amount using address(this).balance,address(this).balance,Unsatisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Deposit.sol#L71,37
findings-131,If the executeBuyCreditMarket function and executeSellCreditMarket function generate a credit split during execution without charging a fragmentation fee,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",87
findings-133,The user's funds may all be used to submit the transaction fee,,Unsatisfactory,,26
findings-134,latestRoundData() has no check for round completeness,oracle stale,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Compensate.sol#L64-L89,70
findings-136,ChainlinkOracle will return the wrong price for asset if underlying aggregator hits minAnswer,oracle minAnswer,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/oracle/PriceFeed.sol#L84-L94,76
findings-137,Incorrect assumption about params.amount can cause DoS for specific executions,minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L91-L93,35
findings-138,`AccountingLibrary.getCreditAmountIn()` calculates swap fees incorrectly.,swap fee,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L249, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/AccountingLibrary.sol#L256",93
findings-139,`Liquidate.executeLiquidate()` calculates `liquidatorReward` incorrectly.,liquidatorreward,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L96-L99,53
findings-140,`Liquidate.executeLiquidate()` calculates `collateralRemainderCap` incorrectly.,liq collateralRemainderCap,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L107-L108,72
findings-141,`LiquidateWithReplacement.executeLiquidateWithReplacement()` should charge a swap fee from a new borrower.,liq miss swap fee,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L146,51
findings-142,A meaningless liquidity validation for a variable pool,aave liquidity amount,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L184, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L194, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L243",67
findings-143,Inconsistent liquidity validation for a variable pool,aave liquidity amount,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L184, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L194, https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L243",48
findings-144,The `borrowATokenCap` requirement doesn't work during a multicall.,borrowATokenCap multicall,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/Multicall.sol#L29,76
findings-145,"While buying/selling credit markets, it might revert when it should work due to the `minimumCreditBorrowAToken` validation.",minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/BuyCreditMarket.sol#L91-L93,37
findings-146,Possible revert of buying/selling 100% of credit markets.,no significant loss,Unsatisfactory,,98
findings-147,A user might repay the wrong borrower.,repay for other user after liquidation,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/Size.sol#L229,71
findings-148,`executeLiquidateWithReplacement()` doesn't validate `minimumCreditBorrowAToken` while replacing a debt position.,updated minimumCreditBorrowAToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/LiquidateWithReplacement.sol#L150,39
findings-149,No `minCollateralOut/deadline` validation in `selfLiquidate()`.,feature improvement,Unsatisfactory,,49
findings-150,`executeCompensate()` doesn't charge the `fragmentationFee` for `RESERVED_ID`.,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",75
findings-151,Unfair calculation logic of protocol profit during liquidation,liq protocolProfitCollateralToken,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/actions/Liquidate.sol#L108,70
findings-152,Sandwich attack on loan fulfillment will temporarily prevent users from accessing their borrowed funds,sandwich buy sell,Satisfactory,https://github.com/code-423n4/2024-06-size/blob/8850e25fb088898e9cf86f9be1c401ad155bea86/src/libraries/CapsLibrary.sol#L67-L72,63
findings-153,A rogue borrower can split the lender's credit position into multiple positions without paying fragmentation fees,fragmentation fee RESERVED_ID,Satisfactory,"https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L136, https://github.com/code-423n4/2024-06-size/blob/main/src/libraries/actions/Compensate.sol#L146-L155",300
findings-155,BorrowOffers with high APR cause DOS in order to grief lenders,no loss,Unsatisfactory,,68
findings-156,Malicious offers can significantly impact the usability of the protocol,"feature improvement, no loss",Unsatisfactory,,78